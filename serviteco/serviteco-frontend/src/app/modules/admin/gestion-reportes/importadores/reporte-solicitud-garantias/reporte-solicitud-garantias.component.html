<div class="absolute inset-0 flex flex-col min-w-0 overflow-hidden">

    <mat-drawer-container class="flex-auto h-full bg-card dark:bg-transparent" (backdropClick)="onBackdropClicked()">

        <!-- Drawer -->
        <mat-drawer class="w-full md:w-160 dark:bg-gray-900" [mode]="drawerMode" [opened]="false" [position]="'end'"
            [disableClose]="true" #matDrawer>
            <router-outlet></router-outlet>
        </mat-drawer>

        <mat-drawer-content class="flex flex-col">

            <!-- Main -->
            <div class="flex-auto">

                <!-- Header -->
                <div class="flex flex-col sm:flex-row md:flex-col flex-auto justify-between py-8 px-6 md:px-8 border-b">

                    <!-- Breadcrumbs -->
                    <div>
                        <div class="hidden sm:flex flex-wrap items-center font-medium">
                            <div>
                                <a class="whitespace-nowrap text-primary-500" style="cursor: pointer;"
                                    [routerLink]="['/inicio']">Inicio</a>
                            </div>
                            <div class="flex items-center ml-1 whitespace-nowrap">
                                <mat-icon class="icon-size-5 text-secondary"
                                    [svgIcon]="'heroicons_solid:chevron-right'">
                                </mat-icon>
                                <span class="ml-1 text-secondary">Reporte de Solicitudes de garantias por
                                    importador </span>
                            </div>
                        </div>
                        <div class="flex sm:hidden">
                            <a class="inline-flex items-center -ml-1.5 text-secondary font-medium"
                                [routerLink]="'/admin-ifec'">
                                <mat-icon class="icon-size-5 text-secondary" [svgIcon]="'heroicons_solid:chevron-left'">
                                </mat-icon>
                                <span class="ml-1">Volver</span>
                            </a>
                        </div>
                    </div>

                    <!-- Title -->
                    <div>
                        <div class="text-4xl font-extrabold tracking-tight leading-none">Reporte de Solicitudes de garantias por
                            importador   PREGUNTAR-----(dISTRIBUIDOR)</div>
                    </div>
                    <!-- Main actions -->
                    <div class="flex items-center mt-4 sm:mt-0 md:mt-4">
                        <!-- Search -->
                        <div class="flex-auto">
                            <form [formGroup]="form">
                                <div class="grid sm:grid-cols-6 gap-6 w-full">

                                    <div class="sm:col-span-1">
                                        <mat-form-field class="fuse-mat-no-subscript w-full">
                                            <mat-label>Fecha Inicial</mat-label>
                                            <input matInput [matDatepicker]="pickerFechaInicial"
                                                formControlName="fecha_inicial" readonly>
                                            <mat-datepicker-toggle matSuffix [for]="pickerFechaInicial">
                                            </mat-datepicker-toggle>
                                            <mat-datepicker #pickerFechaInicial></mat-datepicker>
                                        </mat-form-field>
                                    </div>

                                    <div class="sm:col-span-1">
                                        <mat-form-field class="fuse-mat-no-subscript w-full">
                                            <mat-label>Fecha Final</mat-label>
                                            <input matInput [matDatepicker]="pickerFechaFinal"
                                                formControlName="fecha_final" readonly>
                                            <mat-datepicker-toggle matSuffix [for]="pickerFechaFinal">
                                            </mat-datepicker-toggle>
                                            <mat-datepicker #pickerFechaFinal></mat-datepicker>
                                        </mat-form-field>
                                    </div>

                                    <div class="sm:col-span-1">
                                        <mat-form-field class="fuse-mat-no-subscript w-full">
                                            <mat-label>Importador</mat-label>
                                            <input matInput [formControlName]="'nombre_importador'" [spellcheck]="false"
                                                readonly>
                                            <button mat-icon-button (click)="openBuscadorImportador()" matSuffix
                                                *ngIf="puedeSeleccionarImportador">
                                                <mat-icon class="icon-size-5 ml-2" [svgIcon]="'heroicons_solid:search'">
                                                </mat-icon>
                                            </button>
                                        </mat-form-field>
                                    </div>

                                    <div class="sm:col-span-1">
                                        <mat-form-field class="fuse-mat-no-subscript w-full">
                                            <mat-label>Distribuidor</mat-label>
                                            <input matInput [formControlName]="'nombre_distribuidor'" [spellcheck]="false"
                                                readonly>
                                            <button mat-icon-button (click)="openBuscadorDistribuidor()" matSuffix
                                                *ngIf="puedeSeleccionarDistribuidor">
                                                <mat-icon class="icon-size-5 ml-2" [svgIcon]="'heroicons_solid:search'">
                                                </mat-icon>
                                            </button>
                                        </mat-form-field>
                                    </div>

                                    <div class="sm:col-span-1 mt-6">
                                        <button class="ml-2" mat-flat-button [color]="'primary'"
                                            (click)="consultarData()" [disabled]="form.invalid">
                                            <mat-icon [svgIcon]="'heroicons_outline:search'"></mat-icon>
                                        </button>
                                        <button class="ml-2" mat-flat-button [color]="'primary'" (click)="exportar()"
                                            *ngIf="dataCount > 0" [disabled]="form.invalid">
                                            <mat-icon [svgIcon]="'heroicons_outline:download'"></mat-icon>
                                        </button>
                                    </div>

                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- usuarios list -->
                <div class="relative">
                    <div class="overflow-x-auto">

                        <ng-container *ngIf="dataPaginator$ | async as data">
                            <ng-container *ngIf="dataCount > 0; else noData">
                                <div class="overflow-x-auto mx-6">
                                    <table class="w-full bg-transparent" mat-table matSort [dataSource]="dataSource"
                                        [trackBy]="trackByFn" #table>

                                        <!-- name -->
                                        <ng-container matColumnDef="ticket">
                                            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                ticket
                                            </th>
                                            <td mat-cell *matCellDef="let transaction">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{transaction.ticket}}
                                                </span>
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="nombre_completo">
                                            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                Nombre Completo
                                            </th>
                                            <td mat-cell *matCellDef="let transaction">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{transaction.nombre_completo}}
                                                </span>
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="identificacion">
                                            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                Identificaci√≥n
                                            </th>
                                            <td mat-cell *matCellDef="let transaction">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{transaction.identificacion}}
                                                </span>
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="telefono">
                                            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                telefono
                                            </th>
                                            <td mat-cell *matCellDef="let transaction">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{transaction.telefono}}
                                                </span>
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="correo">
                                            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                Correo
                                            </th>
                                            <td mat-cell *matCellDef="let transaction">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{transaction.correo}}
                                                </span>
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="ciudad">
                                            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                Ciudad
                                            </th>
                                            <td mat-cell *matCellDef="let transaction">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{transaction.ciudad}}
                                                </span>
                                            </td>
                                        </ng-container>

                                        
                                        <ng-container matColumnDef="fecha_ingreso">
                                            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                fecha Ingreso
                                            </th>
                                            <td mat-cell *matCellDef="let transaction">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{transaction.fecha_ingreso}}
                                                </span>
                                            </td>
                                        </ng-container>


                                        <ng-container matColumnDef="descripcion_falla">
                                            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                Descripci√≥n falla
                                            </th>
                                            <td mat-cell *matCellDef="let transaction">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{transaction.descripcion_falla}}
                                                </span>
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="diagnostico_falla">
                                            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                Diagnostico falla
                                            </th>
                                            <td mat-cell *matCellDef="let transaction">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{transaction.diagnostico_falla}}
                                                </span>
                                            </td>
                                        </ng-container>


                                        <ng-container matColumnDef="observacion_diagnostico">
                                            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                Observaci√≥n diagnostico
                                            </th>
                                            <td mat-cell *matCellDef="let transaction">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{transaction.observacion_diagnostico}
                                                </span>
                                            </td>
                                        </ng-container>


                                        <ng-container matColumnDef="observacion_respuesta">
                                            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                               Observaci√≥n respuesta
                                            </th>
                                            <td mat-cell *matCellDef="let transaction">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{transaction.observacion_respuesta}
                                                </span>
                                            </td>
                                        </ng-container>


                                        <ng-container matColumnDef="creado_por">
                                            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                               Creado por 
                                            </th>
                                            <td mat-cell *matCellDef="let transaction">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{transaction.creado_por}
                                                </span>
                                            </td>
                                        </ng-container>


                                        <ng-container matColumnDef="estado_actual">
                                            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                Estado actual
                                            </th>
                                            <td mat-cell *matCellDef="let transaction">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{transaction.estado_actual}
                                                </span>
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="distribuidor">
                                            <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                Distribuidor
                                            </th>
                                            <td mat-cell *matCellDef="let transaction">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{transaction.distribuidor}
                                                </span>
                                            </td>
                                        </ng-container>




                                        <tr mat-header-row *matHeaderRowDef="tableColumns" style="cursor: pointer;">
                                        </tr>
                                        <tr style="cursor: pointer;"
                                            class="order-row h-16 hover:bg-hover cursor-pointer" mat-row
                                            *matRowDef="let row; columns: tableColumns;"
                                            [ngClass]="{'hover:bg-gray-100 dark:hover:bg-hover': !selectedData || selectedData.id !== row.id,
                                            'bg-primary-100 dark:bg-hover': selectedData && selectedData.id === row.id}"></tr>
                                    </table>



                                    <mat-paginator style="float: right;" [pageSize]="pageSizeInit" [length]="dataCount"
                                        (page)="mostrarMas($event)" [showFirstLastButtons]="true"></mat-paginator>
                                </div>

                            </ng-container>
                        </ng-container>

                        <div *ngIf="dataSource.filteredData.length === 0" fxFlex="auto" fxLayout="column"
                            fxLayoutAlign="center center">
                            <div class="p-8 sm:p-16 border-t text-4xl font-semibold tracking-tight text-center">
                                No
                                existen registros</div>
                        </div>

                    </div>

                </div>


            </div>

        </mat-drawer-content>

    </mat-drawer-container>

</div>
